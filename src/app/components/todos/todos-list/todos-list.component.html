<!-- src/app/todo-list/todo-list.component.html -->
<div class="container mt-4" *ngIf="response$ | async as resp; else loading">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Todo List</h5>
        </div>

        <div class="card-body">
            <p class="text-muted mb-3">
                Showing <strong>{{ resp.skip + 1 }}</strong> - <strong>{{ resp.skip + resp.todos.length }}</strong>
                of <strong>{{ resp.total }}</strong>
            </p>

            <ul class="list-group mb-3">
                <li *ngFor="let t of resp.todos"
                    class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <input class="form-check-input me-2" type="checkbox" [checked]="t.completed" disabled />
                        <span [class.text-decoration-line-through]="t.completed">{{ t.todo }}</span>
                    </div>
                    <span class="badge bg-secondary">User {{ t.userId }}</span>
                </li>
            </ul>

            <!-- Pagination -->
            <nav aria-label="Todo pagination">
                <ul class="pagination justify-content-center mb-0">
                    <li class="page-item" [class.disabled]="resp.skip === 0">
                        <button class="page-link" (click)="prev(resp)" [disabled]="resp.skip === 0">
                            <span aria-hidden="true">&laquo; Prev</span>
                        </button>
                    </li>

                    <span class="page-link">
                        Page {{ (resp.skip / resp.limit) + 1 }} /
                        {{ getTotalPages(resp) }}
                    </span>

                    <li class="page-item" [class.disabled]="(resp.skip + resp.todos.length) >= resp.total">
                        <button class="page-link" (click)="next(resp)"
                            [disabled]="(resp.skip + resp.todos.length) >= resp.total">
                            <span aria-hidden="true">Next &raquo;</span>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<ng-template #loading>
    <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading todosâ€¦</span>
        </div>
    </div>
</ng-template>